#: import Window kivy.core.window.Window

# =======================================CUSTOM WIDGETS============================================
<LoginCustomTextInputBox@TextInput>:
#  changing the border color of the textinput field
    canvas.after:
        Color:
            rgba: primaryColor#(254/255, 153/255, 0,1)
        Line:
            width: 1
            rectangle: self.x, self.y, self.width, self.height
    background_normal:''
    background_active:''
    foreground_color: (0.2, 0.2, 0.2, 1)
    # size_hint:(0.6,0.08)
    multilinez:False
    font_family: 'Roboto'
    font_size: '20sp'
    cursor_color:(0.2, 0.2, 0.2, 1)
    cursor_width:"2sp"




# the main window
<LogInWindow>:
    # initialized variables
    #:set mainColor (.06,.45,.45,1)
    #:set mainBackgroundColor (244/255,244/255,251/255)#(1,1,1,.95) 244,244,251
    #:set primaryColor (.06,.45,.45,1) 
    #:set errorMessageColor (1,0,0,1) 
    #:set buttonColor (1/255,15/255,205/255)#(0/255,10/255,131/255) 
    #:set buttonTextColor (1,1,1)#(0/255,10/255,131/255) 

    # variables
    userName: userName
    password:password
    notAdminErrorMessage:notAdminErrorMessage
    userNameErrorMessage:userNameErrorMessage
    userPasswordErrorMessage:userPasswordErrorMessage

    orientation: 'vertical'
    # changing then background of the whole page to white
    canvas.before:
        Color:
            rgba:mainBackgroundColor
        Rectangle:
            pos:self.pos
            size: self.size

    # TOP bar
    BoxLayout:
        canvas.before:
            Color:
                rgba:mainColor
            Rectangle:
                pos:self.pos
                size: self.size
        size_hint_y:None
        height:"30dp"
    # The sign in layout
    BoxLayout:
        size_hint_y:None
        hieght:"4dp"    
        # The login title
        Label:
            text: 'SIGN IN'
            color: primaryColor
            bold:True
            font_size:'30dp'


    BoxLayout:

        BoxLayout:
        BoxLayout:
            size_hint_x:None
            width:'350dp'
            orientation:'vertical'
            # Error to be displayed if the user is not an admin but tries to get access
            BoxLayout:
                size_hint_y:None
                height:'25dp'
                Label:
                    id:notAdminErrorMessage
                    text:''
                    color:errorMessageColor
                    
            # Username textinput box
            BoxLayout:
                size_hint_y:None
                height:'40dp'
                LoginCustomTextInputBox: 
                    id:userName
                    hint_text:"Username"
                    multiline:False
            # wrong username error text
            BoxLayout:
                size_hint_y:None
                height:'25dp'
                Label:
                    id:userNameErrorMessage
                    text:''
                    color:(1,0,0,1)
            # password textinput box
            BoxLayout:
                size_hint_y:None
                height:'40dp'
                LoginCustomTextInputBox: 
                    id:password
                    hint_text:"password"
                    password:True
                    multiline:False
            # wrong password error text
            BoxLayout:
                size_hint_y:None
                height:'25dp'
                Label:
                    id:userPasswordErrorMessage
                    text:''
                    color:(1,0,0,1)

            # admin checkbox and lable
            BoxLayout:
                size_hint_y:None
                height:'20dp'
                Spinner:
                    id: designation
                    size_hint: None, None
                    size: 100, 30
                    text:'operator'
                    values:['operator','admin']
                    
                Label:
                Label:
                Label:
                Label:
                Label:

            # submission button
            BoxLayout:
                size_hint_y:None
                height:'10dp'
            BoxLayout:
                size_hint_y:None
                height:'40dp'
                Button:
                    text: 'Login'
                    background_normal: ''  
                    background_color: primaryColor
                    color: buttonTextColor
                    bold:True
                    on_press: root.validateLogin(designation.text)

            BoxLayout:
        BoxLayout:

    # bottom status bar
    BoxLayout:
        canvas.before:
            Color:
                rgba:mainColor
            Rectangle:
                pos:self.pos
                size: self.size
        size_hint_y:None
        height:"30dp"
        Label:
            text:'Developed by TechWorld   Contact: 0548947033'
        
            


    